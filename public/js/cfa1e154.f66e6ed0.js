(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["cfa1e154"],{8472:function(t,e,o){},"85f6":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"q-my-xl"},[o("q-card",[o("q-card-title",[t._v("Edit "+t._s(t.product.name))]),o("q-card-main",[o("q-field",{attrs:{count:250}},[o("q-input",{attrs:{"float-label":"Name","max-length":"250"},model:{value:t.product.name,callback:function(e){t.$set(t.product,"name",e)},expression:"product.name"}})],1),o("q-field",{attrs:{count:250}},[o("q-input",{attrs:{"float-label":"Brand","max-length":"250"},model:{value:t.product.brand,callback:function(e){t.$set(t.product,"brand",e)},expression:"product.brand"}})],1),o("q-field",{attrs:{count:250}},[o("q-input",{attrs:{"float-label":"Color","max-length":"250"},model:{value:t.product.color,callback:function(e){t.$set(t.product,"color",e)},expression:"product.color"}})],1),o("q-field",{attrs:{count:250}},[o("q-input",{attrs:{"float-label":"Price",type:"number",min:"1"},model:{value:t.product.price,callback:function(e){t.$set(t.product,"price",e)},expression:"product.price"}})],1),o("q-field",{attrs:{count:5e3}},[o("q-input",{attrs:{type:"textarea","float-label":"Description","max-height":100,rows:"7"},model:{value:t.product.description,callback:function(e){t.$set(t.product,"description",e)},expression:"product.description"}})],1),o("p",{staticClass:"q-mt-md"},[o("strong",[t._v("Images:")])]),o("div",{staticClass:"q-mt-md row"},t._l(t.product.images,function(e,a){return o("div",{key:e.file},[o("img",{attrs:{src:"http://localhost:8000/storage/productsimages/images200/"+e.file}}),o("br"),o("button",{on:{click:function(e){t.deleteImage(a)}}},[t._v("DELETE")])])})),o("q-field",{staticClass:"q-mt-lg",attrs:{helper:"Supported format: JPG, max. file size: 300KiB"}},[o("q-uploader",{ref:"uploader",attrs:{"float-label":"Upload new imagess",url:"",multiple:"",extensions:".png, .jpeg, .jpg","max-file-size":2e3,"auto-expand":"","hide-upload-button":"","hide-upload-progress":"","upload-factory":t.uploadImages}})],1)],1),o("q-card-actions",{staticClass:"q-mt-md"},[o("div",{staticClass:"row justify-end full-width docs-btn"},[o("q-btn",{attrs:{label:"Cancel",flat:"",to:"/products/index"}}),o("q-btn",{attrs:{label:"Update",color:"primary"},on:{click:t.updateProduct}})],1)])],1)],1)},i=[];a._withStripped=!0;o("7f7f");var r=o("bc3a"),c=o.n(r),n={data:function(){return{product:{name:"",description:"",price:"",brand:"",color:"",images:[],id:""},deletedImages:[]}},methods:{uploadImages:function(t){var e=this,o=new FormData;o.append("file",t),console.log(o),c.a.post("http://127.0.0.1:8000/api/products/"+this.product.id+"/images",o,{headers:{"content-type":"multipart/form-data"}}).then(function(t){}).catch(function(t){e.$q.notify({type:"negative",timeout:2e3,message:"image upload failed"}),console.log(t)})},deleteImage:function(t){var e=this;this.$q.dialog({title:"Delete",message:"Are you sure to delete this image?",color:"primary",ok:!0,cancel:!0}).then(function(){var o=e.product.images.splice(t,1)[0];o=o.file,e.deletedImages.push(o),console.log(e.deletedImages)}).catch(function(){})},updateProduct:function(){var t=this;c.a.put("http://127.0.0.1:8000/api/products/"+this.$route.params.id,this.productData).then(function(e){t.$q.notify({type:"positive",timeout:2e3,message:"The product has been updated."}),t.product.id=t.$route.params.id;var o={images:t.deletedImages};c.a.put("http://127.0.0.1:8000/api/products/"+t.$route.params.id+"/images",o).then(function(e){setTimeout(function(){t.$router.push({path:"/products/"+t.product.id})},500)}).catch(function(e){t.$q.notify({type:"negative",timeout:2e3,message:"An error has been occured deleting image"}),console.log(e)}),t.$refs.uploader.upload()}).catch(function(e){t.$q.notify({type:"negative",timeout:2e3,message:"An error has been occured."}),console.log(e)})}},mounted:function(){var t=this;c.a.get("http://127.0.0.1:8000/api/products/"+this.$route.params.id+"/show").then(function(e){t.product=e.data,console.log(t.product.images)}).catch(function(e){t.$q.notify({type:"negative",timeout:2e3,message:"Loading product: an error has been occured."}),console.log(e)})},computed:{productData:function(){return{name:this.product.name,description:this.product.description,price:this.product.price,brand:this.product.brand,color:this.product.color}}}},s=n,u=(o("c8e9"),o("2877")),d=Object(u["a"])(s,a,i,!1,null,null,null);d.options.__file="Edit.vue";e["default"]=d.exports},c8e9:function(t,e,o){"use strict";var a=o("8472"),i=o.n(a);i.a}}]);